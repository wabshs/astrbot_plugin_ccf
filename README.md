# 🔍 astrbot_plugin_ccf (B站成分查询插件)

这是一个用于 **AstrBot** 的插件。它可以根据指定的 Bilibili UID，抓取该用户的关注列表，并根据预设的字典分析该用户的“成分”（即关注了哪些特定圈子的UP主或官方号）。

## ✨ 功能特点

* **异步抓取**：使用 `httpx` 异步请求，支持翻页抓取，不会阻塞机器人主线程。
* **自定义标签**：完全通过 `tags.py` 自定义，你可以随意添加“原神”、“王者荣耀”、“V圈”等各种判定规则。
* **详细报告**：输出详细的匹配日志和最终的成分总结。

## 📂 文件结构

请确保你的插件目录结构如下所示：

```text
astrbot_plugin_ccf/
├── main.py          # 插件主逻辑代码
├── tags.py          # 成分判定字典（必须存在）
└── README.md        # 说明文档
```

## ⚙️ 安装与使用
1. 成分表字典在 `tags.py` 文件中进行编辑和维护。请确保该文件存在且格式正确。
```python
# tags.py

IDENTITY_MAP = {
    "王者荣耀": "农友",
    "原神": "米友",
    "崩坏3第一偶像爱酱": "米友",
    "明日方舟": "皱皮",
    "英雄联盟": "撸狗",
    "永劫无间": "劫宝",
    # 在这里添加更多你想检测的UP主或官方号...
}
```

## 🚀 快速开始
在 AstrBot 的任意聊天窗口（群聊或私聊）发送指令：

指令格式： /ccf <B站UID>

示例： /ccf 12345678

## 📝 输出样例
```plaintext
------------------------------
-> 发现关注了 [王者荣耀]，判定为 [农友]
-> 发现关注了 [明日方舟]，判定为 [皱皮]
-> 发现关注了 [原神]，判定为 [米友]
-> 发现关注了 [崩坏3第一偶像爱酱]，判定为 [米友]
------------------------------
【成分鉴定结果】
皱皮,米友,农友
------------------------------
```

## ⚠️ 注意事项
- API 限制：Bilibili 接口有访问频率限制。如果目标用户关注了数千人，抓取可能需要几秒钟，请耐心等待。

- 隐私设置：如果目标用户在 B站隐私设置中隐藏了“关注列表”，本插件将无法获取数据并会返回空列表。

- 风控：请勿短时间内高频大量查询，否则服务器 IP 可能会被 B站暂时封禁。

## ⚖️ 免责声明
本插件仅供娱乐和学习交流使用，请勿用于网络暴力或骚扰他人。开发者不对使用本插件产生的后果负责。
